{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { Navigate } from \"react-router-dom\";\nimport { logOutStart, logOutSuccess, loginFailed, loginStart, loginSuccess, registerFailed, registerStart, registerSuccess } from \"./authSlice\";\nimport { getUserFailed, getUserStart, getUserSuccess } from \"./userSlice\";\nimport { useSelector } from \"react-redux\";\nexport const loginUser = async (user, dispatch, navigate) => {\n  _s();\n  dispatch(loginStart());\n  const users = useSelector(state => {\n    var _state$auth$login;\n    return (_state$auth$login = state.auth.login) === null || _state$auth$login === void 0 ? void 0 : _state$auth$login.currentUser;\n  });\n  try {\n    const res = await axios.post(\"http://localhost:8000/v1/auth/login\", user);\n    dispatch(loginSuccess(res.data));\n    if (users !== null && users !== void 0 && users.admin) {\n      navigate(\"/admin\");\n    }\n    navigate(\"/\");\n  } catch (err) {\n    dispatch(loginFailed());\n  }\n};\n_s(loginUser, \"sx/aBQadEi3Xj/gxEkh8kVHzHlA=\", false, function () {\n  return [useSelector];\n});\nexport const registerUser = async (user, dispatch, navigate) => {\n  dispatch(registerStart());\n  try {\n    await axios.post(\"http://localhost:8000/v1/auth/register\", user);\n    dispatch(registerSuccess());\n    navigate(\"/login\");\n  } catch (err) {\n    dispatch(registerFailed());\n  }\n};\nexport const getAllUsers = async (accessToken, dispatch) => {\n  dispatch(getUserStart);\n  try {\n    const res = await axios.get(\"http://localhost:8000/v1/user/\", {\n      headers: {\n        token: 'Bearer ${accessToken}'\n      }\n    });\n    dispatch(getUserSuccess(res.data));\n  } catch (err) {\n    dispatch(getUserFailed());\n  }\n};\nexport const logOut = async (dispatch, navigate, id, accessToken, axiosJWT) => {\n  dispatch(logOutStart());\n  try {\n    await axiosJWT.post(\"http://localhost:8000/v1/auth/logout\", id, {\n      headers: {\n        token: 'Bearer ${accessToken}'\n      }\n    });\n    dispatch(logOutSuccess());\n  } catch (err) {\n    dispatch(loginFailed());\n  }\n};","map":{"version":3,"names":["axios","Navigate","logOutStart","logOutSuccess","loginFailed","loginStart","loginSuccess","registerFailed","registerStart","registerSuccess","getUserFailed","getUserStart","getUserSuccess","useSelector","loginUser","user","dispatch","navigate","_s","users","state","_state$auth$login","auth","login","currentUser","res","post","data","admin","err","registerUser","getAllUsers","accessToken","get","headers","token","logOut","id","axiosJWT"],"sources":["C:/Users/ACER/OneDrive/Desktop/SourceCode/Công nghệ Web/BookStore/e-book/frontend/src/redux/apiRequest.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { logOutStart, logOutSuccess, loginFailed, loginStart, loginSuccess, registerFailed, registerStart, registerSuccess } from \"./authSlice\";\r\nimport { getUserFailed, getUserStart, getUserSuccess } from \"./userSlice\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\n\r\n\r\nexport const loginUser = async(user,dispatch,navigate) =>{\r\n    dispatch(loginStart());\r\n    const users = useSelector((state) => state.auth.login?.currentUser);\r\n    try {\r\n        const res = await axios.post(\"http://localhost:8000/v1/auth/login\",user);\r\n        dispatch(loginSuccess(res.data));\r\n        if(users?.admin){\r\n            navigate(\"/admin\");\r\n        }\r\n        navigate(\"/\")\r\n    } catch (err) {\r\n        dispatch(loginFailed());\r\n    }\r\n};\r\n\r\nexport const registerUser = async(user,dispatch,navigate) =>{\r\n    dispatch(registerStart());\r\n    try {\r\n        await axios.post(\"http://localhost:8000/v1/auth/register\",user);\r\n        dispatch(registerSuccess());\r\n        navigate(\"/login\");\r\n    } catch (err) {\r\n        dispatch(registerFailed());\r\n    }\r\n};\r\n\r\nexport const getAllUsers = async(accessToken,dispatch) =>{\r\n    dispatch(getUserStart);\r\n    try {\r\n        const res = await axios.get(\"http://localhost:8000/v1/user/\",{\r\n            headers:{token: 'Bearer ${accessToken}'},\r\n        });\r\n        dispatch(getUserSuccess(res.data));\r\n    } catch (err) {\r\n        dispatch(getUserFailed());\r\n    }\r\n};\r\n\r\nexport const logOut = async(dispatch,navigate,id,accessToken,axiosJWT) =>{\r\n    dispatch(logOutStart());\r\n    try {\r\n        await axiosJWT.post(\"http://localhost:8000/v1/auth/logout\",id,{\r\n            headers: {token: 'Bearer ${accessToken}'}\r\n        });\r\n        dispatch(logOutSuccess());\r\n    } catch (err) {\r\n        dispatch(loginFailed());\r\n    }\r\n}"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,WAAW,EAAEC,aAAa,EAAEC,WAAW,EAAEC,UAAU,EAAEC,YAAY,EAAEC,cAAc,EAAEC,aAAa,EAAEC,eAAe,QAAQ,aAAa;AAC/I,SAASC,aAAa,EAAEC,YAAY,EAAEC,cAAc,QAAQ,aAAa;AACzE,SAASC,WAAW,QAAQ,aAAa;AAIzC,OAAO,MAAMC,SAAS,GAAG,MAAAA,CAAMC,IAAI,EAACC,QAAQ,EAACC,QAAQ,KAAI;EAAAC,EAAA;EACrDF,QAAQ,CAACX,UAAU,CAAC,CAAC,CAAC;EACtB,MAAMc,KAAK,GAAGN,WAAW,CAAEO,KAAK;IAAA,IAAAC,iBAAA;IAAA,QAAAA,iBAAA,GAAKD,KAAK,CAACE,IAAI,CAACC,KAAK,cAAAF,iBAAA,uBAAhBA,iBAAA,CAAkBG,WAAW;EAAA,EAAC;EACnE,IAAI;IACA,MAAMC,GAAG,GAAG,MAAMzB,KAAK,CAAC0B,IAAI,CAAC,qCAAqC,EAACX,IAAI,CAAC;IACxEC,QAAQ,CAACV,YAAY,CAACmB,GAAG,CAACE,IAAI,CAAC,CAAC;IAChC,IAAGR,KAAK,aAALA,KAAK,eAALA,KAAK,CAAES,KAAK,EAAC;MACZX,QAAQ,CAAC,QAAQ,CAAC;IACtB;IACAA,QAAQ,CAAC,GAAG,CAAC;EACjB,CAAC,CAAC,OAAOY,GAAG,EAAE;IACVb,QAAQ,CAACZ,WAAW,CAAC,CAAC,CAAC;EAC3B;AACJ,CAAC;AAACc,EAAA,CAbWJ,SAAS;EAAA,QAEJD,WAAW;AAAA;AAa7B,OAAO,MAAMiB,YAAY,GAAG,MAAAA,CAAMf,IAAI,EAACC,QAAQ,EAACC,QAAQ,KAAI;EACxDD,QAAQ,CAACR,aAAa,CAAC,CAAC,CAAC;EACzB,IAAI;IACA,MAAMR,KAAK,CAAC0B,IAAI,CAAC,wCAAwC,EAACX,IAAI,CAAC;IAC/DC,QAAQ,CAACP,eAAe,CAAC,CAAC,CAAC;IAC3BQ,QAAQ,CAAC,QAAQ,CAAC;EACtB,CAAC,CAAC,OAAOY,GAAG,EAAE;IACVb,QAAQ,CAACT,cAAc,CAAC,CAAC,CAAC;EAC9B;AACJ,CAAC;AAED,OAAO,MAAMwB,WAAW,GAAG,MAAAA,CAAMC,WAAW,EAAChB,QAAQ,KAAI;EACrDA,QAAQ,CAACL,YAAY,CAAC;EACtB,IAAI;IACA,MAAMc,GAAG,GAAG,MAAMzB,KAAK,CAACiC,GAAG,CAAC,gCAAgC,EAAC;MACzDC,OAAO,EAAC;QAACC,KAAK,EAAE;MAAuB;IAC3C,CAAC,CAAC;IACFnB,QAAQ,CAACJ,cAAc,CAACa,GAAG,CAACE,IAAI,CAAC,CAAC;EACtC,CAAC,CAAC,OAAOE,GAAG,EAAE;IACVb,QAAQ,CAACN,aAAa,CAAC,CAAC,CAAC;EAC7B;AACJ,CAAC;AAED,OAAO,MAAM0B,MAAM,GAAG,MAAAA,CAAMpB,QAAQ,EAACC,QAAQ,EAACoB,EAAE,EAACL,WAAW,EAACM,QAAQ,KAAI;EACrEtB,QAAQ,CAACd,WAAW,CAAC,CAAC,CAAC;EACvB,IAAI;IACA,MAAMoC,QAAQ,CAACZ,IAAI,CAAC,sCAAsC,EAACW,EAAE,EAAC;MAC1DH,OAAO,EAAE;QAACC,KAAK,EAAE;MAAuB;IAC5C,CAAC,CAAC;IACFnB,QAAQ,CAACb,aAAa,CAAC,CAAC,CAAC;EAC7B,CAAC,CAAC,OAAO0B,GAAG,EAAE;IACVb,QAAQ,CAACZ,WAAW,CAAC,CAAC,CAAC;EAC3B;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}